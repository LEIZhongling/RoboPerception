# <font color=broow size=8>第二组</font>

## <font color=pink size=5>组长：宋泽伟</font>
## <font color=pink size=5>组员：朱斌（关键实验员）</font>
## <font color=pink size=5>组员：武凌点</font>
## <font color=pink size=5>组员：周世顺</font>

# 实验一：安装步骤(武凌点)

## 1.安装点机

## 2.固定网卡天线

![1](./picture/1.jpg)

![2](./picture/3.jpg)

## 3.固定扩展版铜柱

![3](./picture/2.jpg)

## 4.固定Jeston Nano铜柱

## 5.组装摄像头

![5](./picture/6.jpg)

## 6.安装摄像头

![6](./picture/5.jpg)

## 7.安装扩展版和电池

## 8.固定万向轮

## 9.连接电机线

![9](./picture/4.jpg)

## 10.安装底板

## 11.固定nano，安装车轮

![11](./picture/9.jpg)

## 12.安装无线网卡

![12](./picture/7.jpg)

## 13.安装散热风扇

![13](./picture/8.jpg)

## 14.连接排线和天线

![14](./picture/10.jpg)

## 15安装完成

![15.1](./picture/11.jpg)

![15.2](./picture/12.jpg)

# 实验二：安装镜像系统（周世顺）

1. 下载镜像到SD卡。
2. 将小车连接到显示器，连好鼠标键盘连接网络。
3. 将小车和电脑放在同一网络下，查看小车IP地址，登录网站进行实验。
4. 若网速较慢需等待片刻后可选择重启小车或重新打开网页。
   http://<jetbot_ip_address>:8888

# 实验三：电机驱动（周世顺）

1. 左侧打开/Notebooks/basic_motion/。打开basic_motion.ipynb文件
2. 运行此段程序后，会输出左右两条滑条，拖动滑条可以改变左右点击的转速
   ![34](./picture/2020-12-20-22-24-20.png)

3. 此段代码通过“心跳”来保持小车的正常工作，拖动滑条降低心跳频率后小车会停止转动

![35](./picture/2020-12-20-22-25-13.png)

# 实验四：远程遥控（宋泽伟）

登录网站链接小车，打开/Notebooks/teleoperation/。打开teleoperation.ipynb文件。
通过https://html5gamepad.com/网页将手柄配适好

正常后调节图示位置会出现按键变化，修改至正确值

![21](./picture/2020-12-19-14-19-23.png)

通过调节摄像头代码来显示摄像头拍摄到的图片
![22](./picture/2020-12-19-14-21-29.png)
（显示组员合照）

最终设置为 Asex[0]控制左边轮子，Asex[1]控制右边轮子，button[0]控制拍照。为下一步实验做准备
（加入图片）

# 实验五： 自主避障（宋泽伟）

## 收集数据

一边移动小车收集图片，一边操作。0表示可通过，1表示阻碍
![5.1](./picture/2020-12-20-16-09-18.png)

## 训练神经网络

打开Notebooks/collision_avoidance/，打开train_model.ipynb文件
  不需要解压，直接下载即可。

训练神经网络，运行30次之后。完成训练。

## 结果测试

![33](./picture/2020-12-20-22-38-27.png)

![55](./picture/2020-12-20-22-39-13.png)

![66](./picture/2020-12-20-22-39-34.png)

# 实验六：目标跟踪（宋泽伟）

 1.左侧打开Notebook/object_following/，打开live_demo.ipynb文件 
 2.运行程序之前需要先将预先训练好的ssd_mobilenet_v2_coco.engine模型下载，解压后复制到当前文件夹目录下
 3.需要注意的时候，本章程序需要用到上一章自主避障中建立的模块，小车需要再同一个环境中进行。
 4.运行此段代码之前，需要将检测对象放到摄像头前面。运行程序后会输出检测到的coco对象。没有检测到对象则输出空数据[[ ]]。输出信息通过查表可知检测到了苹果，苹果的ID为53。如果同时检测到多个对象则输出多个信息。

开始自动检测
![6.2](./picture/2020-12-20-16-24-24.png)

检测水杯，显示bbox
![6.1](./picture/2020-12-20-16-10-25.png)

将速度调节慢一些，当jetbot检测到目标是会转向目标，如果被障碍物挡住jetbot会左转

# 实验七：目标巡线（宋泽伟）

找到Notebooks/road_following/。打开data_collection.ipynb文件

程序运行到此处会显示当前摄像头的测试图像。右边图像会显示一个绿点和蓝色线。用于表示小车应该运行的路线。为方便后面的操作，我们将输出窗口用新窗口打开

绑定按键到手柄上，设置正确值。

![7.1](./picture/2020-12-20-16-36-01.png)
可以看到蓝色线条，手柄可以控制线转动，可控制拍照

![7.2](./picture/2020-12-20-16-36-53.png)
准备开始收集数据

![7.3](./picture/2020-12-20-16-37-36.png)
继续收集

![7.4](./picture/2020-12-20-16-39-10.png)
训练小车，耐心等待

![7.5](./picture/2020-12-20-16-41-17.png)
调节速度，否则无法运行

![7.6](./picture/2020-12-20-16-42-07.png)
显示效果，测试成功
![7.7](./picture/2020-12-20-16-42-52.png)

# 实验八：ROS （武凌点）

## 1. 安装melodic版本ROS

### 1.1 直接用apt安装ROS.

### 1.2 安装python库

### 1.3 添加i2c到user用户组

## 2. 创建catkin工作空间

### 2.1 创建catkin工作空间保存我们的ROS程序包


### 2.2 关闭当前终端，重新打开一个新的终端。确认ROS是否

安装成功

## 3. 编译安装jetson-inference

注: 由于Jetson nano服务器均在国外，部分资源需要能够上外网才能可以获取，否则可能安装失败。另外需要安装一下库

## 4. 编译安装ros_deep_learning

## 5. 编译安装jetbot_ros

## 6. 测试jetbot ROS

###  6.1 打开一个新终端，然后运行ros核心节点

【注意】roscore核心节点必须保持运行状态，否则其他所有的节点都不能工作

### 6.2 运行电机节点

### 6.3 测试电机命令

打开一个新的终端，运行如下测试命令可以控制jetbot运动

### 6.4 使用OLED显示信息

新建一个终端运行OLED节点

### 6.５使用键盘控制jetbot移动

新建一个终端运行teleop_key节点
程序运行后通过键盘输入W、S、D、A四个按键控制jetbot前后左右移动

### 6.６使用游戏摇杆控制jetbot移动

【注意】如果运行命令后提示jstest命令找不到则需要运行如下命令安装对应的库。

### 6.７使用摄像头实时监控

启动jetbot_camera节点，启动jetbot摄像头视频流

![](./picture/13.jpg)
![](./picture/14.jpg)
![](./picture/15.jpg)
![](./picture/16.png)
![](./picture/17.jpg)
![](./picture/18.jpg)
![](./picture/19.jpg)
![](./picture/20.jpg)

# 八.交流心得

 1. 学会安装ros和他的相关组件，掌握配置ros配合jebot的操作。加深了对代码和jetbot运动理解。完成jetbot监督学习。更加了解Resnet和CNN和GoogleNet的训练和应用
 2. 通过此次的设计制作，使我们更加认识到了动手能力和理论知识的重要性，而理论与实践的结合更是重中之重。当然，我们也深刻地认识到我们的不足，由于自身理论知识的欠缺和动手能力的不佳在工作中频频受阻，走了好多弯路，虽然在制作过程中不可避免地遇到很多问题,但是最后还是在老师以及同学的帮助下圆满解决了这些问题，实现了整个系统设计与最后调试，相关指标达到预期的要求，很好地完成了本次设计任务。
 3. 经过多次的修改和调试测量，本设计基本符合设计要求，由于受人为因素和软硬件的限制，系统难免不了带来一些误差，但通过调节和精确计算可以减小误差，并且在不断的摸索前进中我们学到了很多东西。特别是，在老师的帮助下，我们获得的不只是知识和成果，还有比之更重要的学习方法和解决问题的能力，这将是我们一生的财富，就像我们在老师的帮助下不断的寻找着打开各个知识宝库的金钥匙。
 4. 这次实验让我对人工智能有了更多的了解，通过给小车装系统，然后用代码成功操控小车，见识到了人工智能小车是怎么样自主避障，目标跟踪。
